<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meteor Rain Predictor</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø© Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¨Ø­Ø« -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

 <style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #04f368;
    color: #ffffff;
  }

  #map { height: 400px; margin-bottom: 20px; }
  .delete-btn { cursor: pointer; background: none; border: none; font-size: 1.2em; }

  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }

  nav {
    background: #a6c8e0;
    padding: 10px;
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  nav ul { display: flex; list-style: none; padding: 0; margin: 0; }
  nav ul li { margin-right: 15px; }
  nav ul li a { text-decoration: none; color: #1a1a1a; font-weight: 500; }

  header, section, footer { padding: 20px; }

  .cards {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }
  .card {
    background: #ffffff;
    padding: 15px;
    border-radius: 8px;
    flex: 1;
    min-width: 150px;
    text-align: center;
    box-shadow: 0 3px 6px rgba(0,0,0,0.12);
    color: #000;
  }

  .team-grid { display: flex; flex-wrap: wrap; gap: 15px; }
  .member { flex: 1 1 150px; text-align: center; }

  /* Dark Mode */
  .dark { background: #222; color: #eee; }
  .dark nav { background: #333; }
  .dark nav ul li a { color: #eee; }
  .dark .card { background: #444; color: #eee; }

  /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
  .leaflet-control button {
    margin: 2px;
    padding: 5px 8px;
    cursor: pointer;
    border: none;
    background: white;
    border-radius: 4px;
  }
</style>

</head>
<body>
  <!-- Navbar -->
  <nav>
    <ul>
      <li><a href="#home">ğŸ  Home</a></li>
      <li><a href="#map-section">ğŸ—ºï¸ Map</a></li>
      <li><a href="#about">â„¹ï¸ About</a></li>
      <li><a href="#features">âœ¨ Features</a></li>
      <li><a href="#team">ğŸ‘¨â€ğŸš€ Team</a></li>
      <li><a href="#faq">â“ FAQ</a></li>
      <li><a href="#contact">ğŸ“© Contact</a></li>
    </ul>
    <button id="mode-toggle">ğŸŒ™ Toggle Mode</button>
  </nav>

  <!-- Header -->
  <header id="home">
    <h1>â˜” Will It Rain On My Parade?</h1>
    <p>Click anywhere on the map to check the rain probability</p>
  </header>

  <!-- Map Section -->
  <main id="map-section">
    <h2>Interactive Map</h2>
    <div id="map"></div>
    <div id="result"></div>

    <section id="history">
      <h3>ğŸ“Š Prediction History</h3>
      <table id="history-table">
        <thead>
          <tr>
            <th>Lat</th>
            <th>Lon</th>
            <th>Rain %</th>
            <th>Time</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <!-- About Section -->
  <section id="about">
    <h2>About the Project</h2>
    <p>This project was developed for the NASA Space Apps Challenge 2025 ğŸš€.</p>
    <div class="cards">
      <div class="card"><h3>ğŸŒ Global Coverage</h3><p>Get predictions anywhere in the world.</p></div>
      <div class="card"><h3>ğŸ¤– AI Powered</h3><p>Machine learning estimates the chance of rainfall.</p></div>
      <div class="card"><h3>ğŸ“± Easy Access</h3><p>Mobile friendly, fast, and lightweight design.</p></div>
    </div>
  </section>

  <!-- Features Section -->
<section id="features">
  <h2>âœ¨ Features</h2>
  <ul>
    <li><a href="map.html" target="_blank">ğŸ—ºï¸ Interactive map with markers</a></li>
    <li><a href="history.html" target="_blank">ğŸ“Š Prediction history stored locally</a></li>
    <li><a href="darkmode.html" target="_blank">ğŸŒ™ Dark/Light map modes</a></li>
    <li><a href="responsive.html" target="_blank">ğŸ“± Responsive mobile design</a></li>
    <li><a href="navigation.html" target="_blank">ğŸ§­ Easy navigation with smooth scroll</a></li>
    <li><a href="notifications.html" target="_blank">ğŸ”” Custom notifications and alerts</a></li>
    <li><a href="team.html" target="_blank">ğŸ‘¨â€ğŸš€ Team showcase section</a></li>
  </ul>
</section>


  <!-- Team Section -->
  <section id="team">
    <h2>ğŸ‘¨â€ğŸš€ Meet the Team</h2>
    <div class="team-grid">
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ù…Ø­Ù…Ø¯ Ù…ØµØ·ÙÙ‰</h4><p>Frontend Developer</p></div>
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ø³ÙŠÙ Ø§Ù„Ø¯ÙŠÙ†</h4><p>Backend Developer</p></div>
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ø£Ø­Ù…Ø¯ Ø«Ø±ÙˆØª</h4><p>Data Scientist</p></div>
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ø¹Ø² Ø§Ù„Ø¯ÙŠÙ† ÙƒØ±ÙŠÙ…</h4><p>AI Engineer</p></div>
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ù…Ø­Ù…Ø¯ Ø£Ø³Ø§Ù…Ø©</h4><p>Project Manager</p></div>
      <div class="member"><img src="https://via.placeholder.com/100" /><h4>Ø£Ù…Ù„</h4><p>Designer</p></div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq">
    <h2>â“ Frequently Asked Questions</h2>
    <details><summary>How does the prediction work?</summary><p>We use AI models trained on weather and satellite data.</p></details>
    <details><summary>Is it 100% accurate?</summary><p>No model is perfect, but we aim for high reliability.</p></details>
    <details><summary>Can I use this offline?</summary><p>Currently, you need internet access to fetch predictions.</p></details>
    <details><summary>Can I contribute to the project?</summary><p>Yes! Our project is open-source and welcomes contributors.</p></details>
  </section>

  <!-- Contact Section -->
  <section id="contact">
    <h2>ğŸ“© Contact Us</h2>
    <form>
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <textarea placeholder="Your Message"></textarea>
      <button type="submit">Send</button>
    </form>
  </section>

  <!-- Extra Info -->
  <section id="extra-info">
    <h2>ğŸŒŸ Extra Information</h2>
    <p>Explore more about meteor showers, rain probabilities, and space weather data from NASA and other organizations.</p>
  </section>

  <!-- Footer -->
  <footer>
    <p>Powered by NASA Space Apps ğŸš€ | Built with â¤ï¸</p>
    <p>Â© 2025 Meteor Rain Predictor</p>
  </footer>

  <script>
    // âœ… Ø¥Ø´Ø¹Ø§Ø± ØªØ±Ø­ÙŠØ¨
    window.onload = () => {
      if ("Notification" in window) {
        Notification.requestPermission().then(perm => {
          if (perm === "granted") {
            new Notification("ğŸ‘‹ Welcome to Meteor Rain Predictor!");
          }
        });
      }
    };

    // Initialize map
    const map = L.map("map").setView([30.0444, 31.2357], 5);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    const markers = new Map();
    function getRainProbability() { return Math.floor(Math.random()*101); }
    function getCurrentTime() { return new Date().toLocaleTimeString(); }
    function generateId() { return Date.now() + Math.random().toString(16).slice(2); }

    function saveToLocalStorage(id, lat, lon, rainProb, time) {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      history.push({ id, lat, lon, rainProb, time });
      localStorage.setItem("history", JSON.stringify(history));
    }

    function removeFromLocalStorage(id) {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      history = history.filter(item => item.id !== id);
      localStorage.setItem("history", JSON.stringify(history));
    }

    function addHistoryRow(id, lat, lon, rainProb, time) {
      const tbody = document.querySelector("#history-table tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${lat}</td>
        <td>${lon}</td>
        <td>${rainProb}%</td>
        <td>${time}</td>
        <td><button class="delete-btn">âœ–ï¸</button></td>
      `;
      tbody.appendChild(row);

      const marker = L.marker([lat, lon]).addTo(map)
        .bindPopup(`Rain: ${rainProb}%<br>(${lat}, ${lon})`);
      markers.set(id, marker);

      row.querySelector(".delete-btn").addEventListener("click", () => {
        row.remove();
        map.removeLayer(marker);
        markers.delete(id);
        removeFromLocalStorage(id);
      });
    }

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem("history")) || [];
      history.forEach(item => addHistoryRow(item.id, item.lat, item.lon, item.rainProb, item.time));
    }

    map.on("click", e => {
      const lat = e.latlng.lat.toFixed(2);
      const lon = e.latlng.lng.toFixed(2);
      const rainProb = getRainProbability();
      const time = getCurrentTime();
      const id = generateId();
      addHistoryRow(id, lat, lon, rainProb, time);
      saveToLocalStorage(id, lat, lon, rainProb, time);
      document.getElementById("result").innerHTML = `
        <h3>ğŸ“ Location: (${lat}, ${lon})</h3>
        <p>ğŸŒ§ï¸ Rain Probability: <strong>${rainProb}%</strong></p>
        <p>ğŸ•’ Time: ${time}</p>
      `;
    });

    loadHistory();

    // âœ… Ø²Ø±Ø§Ø± My Location
    const locateBtn = L.control({ position: "topright" });
    locateBtn.onAdd = function () {
      const btn = L.DomUtil.create("button", "locate-btn");
      btn.innerHTML = "ğŸ“ My Location";
      btn.onclick = () => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(pos => {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;
            map.setView([lat, lon], 12);
            L.marker([lat, lon]).addTo(map)
              .bindPopup("ğŸ“ You are here").openPopup();
          });
        }
      };
      return btn;
    };
    locateBtn.addTo(map);

    // âœ… Ø²Ø±Ø§Ø± Clear All
    const clearBtn = L.control({ position: "topright" });
    clearBtn.onAdd = function () {
      const btn = L.DomUtil.create("button", "clear-btn");
      btn.innerHTML = "ğŸ—‘ï¸ Clear All";
      btn.onclick = () => {
        document.querySelector("#history-table tbody").innerHTML = "";
        markers.forEach(marker => map.removeLayer(marker));
        markers.clear();
        localStorage.removeItem("history");
      };
      return btn;
    };
    clearBtn.addTo(map);

    // âœ… Search Bar
   // âœ… Search Bar
var geocoder = L.Control.geocoder({
  defaultMarkGeocode: false
})
.on('markgeocode', function(e) {
  const lat = e.geocode.center.lat.toFixed(2);
  const lon = e.geocode.center.lng.toFixed(2);
  const locationName = e.geocode.name; // ğŸ‘ˆ Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù†
  const rainProb = getRainProbability();
  const time = getCurrentTime();
  const id = generateId();

  map.setView([lat, lon], 10);

  addHistoryRow(id, lat, lon, rainProb, time);
  saveToLocalStorage(id, lat, lon, rainProb, time);

  document.getElementById("result").innerHTML = `
    <h3>ğŸ“ Location: ${locationName} (${lat}, ${lon})</h3>
    <p>ğŸŒ§ï¸ Rain Probability: <strong>${rainProb}%</strong></p>
    <p>ğŸ•’ Time: ${time}</p>
  `;
})

.addTo(map);


    // âœ… Toggle Mode
    const modeToggle = document.getElementById("mode-toggle");
    modeToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      modeToggle.textContent = document.body.classList.contains("dark") ? "â˜€ï¸ Light Mode" : "ğŸŒ™ Dark Mode";
    });

    // âœ… Contact Form
    const form = document.querySelector("#contact form");
    form.addEventListener("submit", e => {
      e.preventDefault();
      alert("âœ… Your message has been sent successfully!");
      form.reset();
    });
  </script>
</body>
</html>
