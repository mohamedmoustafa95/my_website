<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meteor Rain Predictor</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- مكتبة الخريطة Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <style>
    #map { height: 400px; margin-bottom: 20px; }
    .delete-btn { cursor: pointer; background: none; border: none; font-size: 1.2em; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <!-- 🔹 Navbar -->
  <nav>
    <ul>
      <li><a href="#home">🏠 Home</a></li>
      <li><a href="#map-section">🗺️ Map</a></li>
      <li><a href="#about">ℹ️ About</a></li>
      <li><a href="#features">✨ Features</a></li>
      <li><a href="#team">👨‍🚀 Team</a></li>
      <li><a href="#faq">❓ FAQ</a></li>
      <li><a href="#contact">📩 Contact</a></li>
    </ul>
    <button id="mode-toggle">🌙 Toggle Mode</button>
  </nav>

  <!-- 🔹 Header -->
  <header id="home">
    <h1>☔ Will It Rain On My Parade?</h1>
    <p>Click anywhere on the map to check the rain probability</p>
  </header>

  <!-- 🔹 Main Section -->
  <main id="map-section">
    <h2>Interactive Map</h2>
    <div id="map"></div>
    <div id="result"></div>

    <!-- Dashboard -->
    <section id="history">
      <h3>📊 Prediction History</h3>
      <table id="history-table">
        <thead>
          <tr>
            <th>Lat</th>
            <th>Lon</th>
            <th>Rain %</th>
            <th>Time</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody>
          <!-- JS هيضيف الصفوف -->
        </tbody>
      </table>
    </section>
  </main>

  <!-- 🔹 About Section -->
  <section id="about">
    <h2>About the Project</h2>
    <p>
      This project was developed for the NASA Space Apps Challenge 2025 🚀.
      Our mission is to help people predict rain probabilities in any
      location around the globe using satellite data and AI.
    </p>
    <div class="cards">
      <div class="card">
        <h3>🌍 Global Coverage</h3>
        <p>Get predictions anywhere in the world.</p>
      </div>
      <div class="card">
        <h3>🤖 AI Powered</h3>
        <p>Machine learning estimates the chance of rainfall.</p>
      </div>
      <div class="card">
        <h3>📱 Easy Access</h3>
        <p>Mobile friendly, fast, and lightweight design.</p>
      </div>
    </div>
  </section>

  <!-- 🔹 Features Section -->
  <section id="features">
    <h2>✨ Features</h2>
    <ul>
      <li>Interactive map with markers</li>
      <li>Prediction history stored locally</li>
      <li>Dark/Light map modes</li>
      <li>Responsive mobile design</li>
      <li>Easy navigation with smooth scroll</li>
      <li>Custom notifications and alerts</li>
      <li>Team showcase section</li>
    </ul>
  </section>

  <!-- 🔹 Team Section -->
  <section id="team">
    <h2>👨‍🚀 Meet the Team</h2>
    <div class="team-grid">
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member1" />
        <h4>محمد مصطفى</h4>
        <p>Frontend Developer</p>
      </div>
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member2" />
        <h4>سيف الدين</h4>
        <p>Backend Developer</p>
      </div>
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member3" />
        <h4>أحمد ثروت</h4>
        <p>Data Scientist</p>
      </div>
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member4" />
        <h4>عز الدين كريم</h4>
        <p>AI Engineer</p>
      </div>
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member5" />
        <h4>محمد أسامة</h4>
        <p>Project Manager</p>
      </div>
      <div class="member">
        <img src="https://via.placeholder.com/100" alt="member6" />
        <h4>أمل</h4>
        <p>Designer</p>
      </div>
    </div>
  </section>

  <!-- 🔹 FAQ Section -->
  <section id="faq">
    <h2>❓ Frequently Asked Questions</h2>
    <details>
      <summary>How does the prediction work?</summary>
      <p>We use AI models trained on weather and satellite data.</p>
    </details>
    <details>
      <summary>Is it 100% accurate?</summary>
      <p>No model is perfect, but we aim for high reliability.</p>
    </details>
    <details>
      <summary>Can I use this offline?</summary>
      <p>Currently, you need internet access to fetch predictions.</p>
    </details>
    <details>
      <summary>Can I contribute to the project?</summary>
      <p>Yes! Our project is open-source and welcomes contributors.</p>
    </details>
  </section>

  <!-- 🔹 Contact Section -->
  <section id="contact">
    <h2>📩 Contact Us</h2>
    <form>
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <textarea placeholder="Your Message"></textarea>
      <button type="submit">Send</button>
    </form>
  </section>

  <!-- 🔹 Extra Section -->
  <section id="extra-info">
    <h2>🌟 Extra Information</h2>
    <p>
      Explore more about meteor showers, rain probabilities, and space
      weather data from NASA and other organizations.
    </p>
  </section>

  <!-- 🔹 Footer -->
  <footer>
    <p>Powered by NASA Space Apps 🚀 | Built with ❤️</p>
    <p>© 2025 Meteor Rain Predictor</p>
  </footer>

  <!-- JS -->
  <script>
    // Initialize map
    const map = L.map("map").setView([30.0444, 31.2357], 5);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
    }).addTo(map);

    // Helpers
    function getRainProbability() { return Math.floor(Math.random() * 101); }
    function getCurrentTime() { return new Date().toLocaleTimeString(); }

    function saveToLocalStorage(lat, lon, rainProb, time) {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      history.push({ lat, lon, rainProb, time });
      localStorage.setItem("history", JSON.stringify(history));
    }

    function removeFromLocalStorage(lat, lon, time) {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      history = history.filter(item => !(item.lat === lat && item.lon === lon && item.time === time));
      localStorage.setItem("history", JSON.stringify(history));
    }

    function addHistoryRow(lat, lon, rainProb, time) {
      const tbody = document.querySelector("#history-table tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${lat}</td>
        <td>${lon}</td>
        <td>${rainProb}%</td>
        <td>${time}</td>
        <td><button class="delete-btn">✖️</button></td>
      `;
      tbody.appendChild(row);

      // Delete button
      row.querySelector(".delete-btn").addEventListener("click", () => {
        row.remove();
        removeFromLocalStorage(lat, lon, time);
      });
    }

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem("history")) || [];
      history.forEach(item => addHistoryRow(item.lat, item.lon, item.rainProb, item.time));
    }

    // Map click
    map.on("click", function(e) {
      const lat = e.latlng.lat.toFixed(2);
      const lon = e.latlng.lng.toFixed(2);
      const rainProb = getRainProbability();
      const time = getCurrentTime();

      L.marker([lat, lon])
        .addTo(map)
        .bindPopup(`Rain: ${rainProb}%<br>(${lat}, ${lon})`)
        .openPopup();

      addHistoryRow(lat, lon, rainProb, time);
      saveToLocalStorage(lat, lon, rainProb, time);

      document.getElementById("result").innerHTML = `
        <h3>📍 Location: (${lat}, ${lon})</h3>
        <p>🌧️ Rain Probability: <strong>${rainProb}%</strong></p>
        <p>🕒 Time: ${time}</p>
      `;
    });

    loadHistory();

    // Navbar smooth scroll
    document.querySelectorAll("nav a").forEach(link => {
      link.addEventListener("click", function(e) {
        e.preventDefault();
        const targetId = this.getAttribute("href").substring(1);
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
          window.scrollTo({ top: targetElement.offsetTop - 50, behavior: "smooth" });
        }
      });
    });

    // Dark mode toggle
    const modeToggle = document.getElementById("mode-toggle");
    modeToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      modeToggle.textContent = 
        document.body.classList.contains("dark") ? "☀️ Light Mode" : "🌙 Dark Mode";
    });

    // Fake contact form
    const form = document.querySelector("#contact form");
    form.addEventListener("submit", e => {
      e.preventDefault();
      alert("✅ Your message has been sent successfully!");
      form.reset();
    });
  </script>
</body>
</html>
